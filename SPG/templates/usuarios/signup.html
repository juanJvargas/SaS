{% extends 'index.html' %}
{% load static %}
{% load bootstrap3 %}
{% block css %}
<link href="//cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />
        
{% endblock css %}
{% block contenido %}
<header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title">Registrar usuarios</h3>
                </div>
                <div class="box-body">
                    
                    <form method="post" id="formulario" onsubmit="return validacion()" action="{% url 'usuarios:registro' %}"> {% csrf_token %}
                        
                        <div class="row">
                            <div class="col-sm-4">
                                {% bootstrap_field form.first_name%}
                            </div>
                            <div class="col-sm-4">
                                {% bootstrap_field form.last_name%}
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.cedula%}
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.telefono%}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-2">
                                {% bootstrap_field form.username%}
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.direccion%}
                            
                            </div>
                            <div class="col-sm-4">
                                {% bootstrap_field form.email%}
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.cargo%}
                            
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.tenant%}
                            
                            </div>
                            

                        </div>


                        <div class="row">
                        
                            <div class="col-sm-4">
                                {% bootstrap_field form.password1%}
                            </div>
                            <div class="col-sm-4">
                                {% bootstrap_field form.password2%}
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.activo%}
                            
                            </div>
                            <div class="col-sm-2">
                                {% bootstrap_field form.is_superuser%}
                            
                            </div>
                        </div>
                        <button type="submit" class="btn btn-success btn-raised" id="registrar">Registrar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</header>
<section class="page-section portfolio" id="portfolio">
    <div class="container d-flex align-items-center flex-column">
        
        <divclass="col-md-12">
            <div class="box box-primary ">
            <div class="box-header">
                <h3 class="box-title">Listado de empleados</h3>
            </div>
            <div class="box-body">
                <table id="tabla_empleados" class="table table-striped table-bordered table-responsive">
                    <thead>
                    <tr>
                        <th>Cedula</th>
                        <th>Nombres</th>
                        <th>Apellidos</th>
                        <th>Cargo</th>
                        <th>tenant</th>
                        <th>Usuario</th>
                        <th>Correo</th>
                        <th>Tel.</th>
                        <th>Activo</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for empleado in empleados %}
                    <tr>
                        <td>{{ empleado.cedula }}</td>
                        <td>{{ empleado.first_name }}</td>
                        <td>{{ empleado.last_name }}</td>
                        <td>{{ empleado.cargo }}</td>
                        <td>{{ empleado.tenant }}</td>
                        <td>{{ empleado.username }}</td>
                        <td>{{ empleado.email }}</td>
                        <td>{{ empleado.telefono }}</td>
                        <td>
                            {%  if empleado.activo %} <span class="badge bg-green">Activo</span>
                            {% else %} <span class="badge bg-red">Inactivo</span>
                            {% endif %}
                        </td>
                        <td><a href="{% url 'usuarios:modificar_empleado' empleado.id %}">Editar Empleado</a>
                        </td>
                    </tr>
                    {% endfor %}

                    </tbody>
                </table>

            </div>
        </div>
        </div>
    </div>
</section>
{% endblock contenido %}

{% block js %}
<script src="{% static 'bower_components/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net-bs/responsive/dataTables.responsive.min.js' %}"></script>

<script src="{% static 'dist/js/check_username.js' %}"></script>
<script src="{% static 'dist/js/validacion_registro_empleados.js' %}"></script>
<script src="{% static 'plugins/toastr/toastr.min.js' %}"></script>
<script src="//cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
        

<script>
    $(document).ready( function () {
    $('#tabla_empleados').DataTable();
} );
</script>
{% endblock js %}